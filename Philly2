-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")

-- Variables
local localPlayer = Players.LocalPlayer
local coordinatesTable = {}
local markersFolder = Instance.new("Folder")
markersFolder.Name = "CoordinateMarkers"
markersFolder.Parent = game.Workspace

-- UI Creation
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CoordinateLoggerUI"
screenGui.Parent = localPlayer:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 200, 0, 100)
mainFrame.Position = UDim2.new(0, 10, 0, 10)
mainFrame.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

local titleLabel = Instance.new("TextLabel")
titleLabel.Text = "Coordinate Logger"
titleLabel.Size = UDim2.new(1, 0, 0, 20)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.Parent = mainFrame

local statusLabel = Instance.new("TextLabel")
statusLabel.Text = "No coordinates recorded."
statusLabel.Size = UDim2.new(1, 0, 0, 20)
statusLabel.Position = UDim2.new(0, 0, 0, 20)
statusLabel.TextColor3 = Color3.new(1, 1, 1)
statusLabel.BackgroundTransparency = 1
statusLabel.Font = Enum.Font.SourceSans
statusLabel.Parent = mainFrame

local placeMarkerButton = Instance.new("TextButton")
placeMarkerButton.Text = "Place Marker"
placeMarkerButton.Size = UDim2.new(1, -10, 0, 30)
placeMarkerButton.Position = UDim2.new(0, 5, 0, 45)
placeMarkerButton.BackgroundColor3 = Color3.new(0.3, 0.6, 0.9)
placeMarkerButton.TextColor3 = Color3.new(1, 1, 1)
placeMarkerButton.Font = Enum.Font.SourceSansBold
placeMarkerButton.Parent = mainFrame

local downloadButton = Instance.new("TextButton")
downloadButton.Text = "Download"
downloadButton.Size = UDim2.new(1, -10, 0, 30)
downloadButton.Position = UDim2.new(0, 5, 0, 80)
downloadButton.BackgroundColor3 = Color3.new(0.2, 0.8, 0.4)
downloadButton.TextColor3 = Color3.new(1, 1, 1)
downloadButton.Font = Enum.Font.SourceSansBold
downloadButton.Parent = mainFrame

local function createMarker(position)
    local part = Instance.new("Part")
    part.Name = "CoordinateMarker"
    part.Anchored = true
    part.CanCollide = false
    part.Size = Vector3.new(2, 2, 2)
    part.Shape = Enum.PartType.Sphere
    part.Material = Enum.Material.Neon
    part.Color = Color3.new(1, 0, 0) -- Red color
    part.Position = position
    part.Parent = markersFolder
end

local function updateStatus()
    statusLabel.Text = "Recorded " .. #coordinatesTable .. " coordinates."
end

placeMarkerButton.MouseButton1Click:Connect(function()
    local character = localPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        local humanoidRootPart = character.HumanoidRootPart
        local position = humanoidRootPart.Position
        
        table.insert(coordinatesTable, {
            x = position.X,
            y = position.Y,
            z = position.Z
        })
        
        createMarker(position)
        updateStatus()
        print("Coordinates recorded: " .. tostring(position))
    else
        print("Could not find character or HumanoidRootPart.")
    end
end)

downloadButton.MouseButton1Click:Connect(function()
    if #coordinatesTable == 0 then
        statusLabel.Text = "No coordinates to download."
        return
    end

    local jsonString = HttpService:JSONEncode(coordinatesTable)
    
    if writefile then
        writefile("coordinates.json", jsonString)
        statusLabel.Text = "File downloaded successfully!"
        print("Coordinates saved to coordinates.json")
    else
        statusLabel.Text = "writefile() not supported."
        print("Error: writefile() is not supported by your executor.")
    end
end)

-- Initial status update
updateStatus()

print("Coordinate logger script loaded. üó∫Ô∏è")
